<input
  type="checkbox"
  id="dpmModal"
  class="modal-toggle"
  [(ngModel)]="modalOpen"
/>
<label for="dpmModal" class="modal cursor-pointer">
  <label class="modal-box relative">
    <div *ngIf="currentDpm">
      <h3 class="text-xl font-bold mx-4">{{ currentDpm.type }}</h3>
      <table
        class="my-4 border-separate border-spacing-x-4 border-spacing-y-1.5"
      >
        <tbody class="text-left align-text-top">
          <tr>
            <th>Points:</th>
            <td>{{ currentDpm.points | points }}</td>
          </tr>
          <tr>
            <th>Block:</th>
            <td>{{ currentDpm.block | block }}</td>
          </tr>
          <tr>
            <th>Location:</th>
            <td>{{ currentDpm.location | uppercase }}</td>
          </tr>
          <tr>
            <th>Date:</th>
            <td>{{ currentDpm.date }}</td>
          </tr>
          <tr>
            <th>Time:</th>
            <td>
              {{ currentDpm.time }}
            </td>
          </tr>
          <tr *ngIf="currentDpm.notes" class="break-words whitespace-normal">
            <th>Notes:</th>
            <td>{{ currentDpm.notes }}</td>
          </tr>
        </tbody>
      </table>
      <div class="modal-action">
        <label for="dpmModal" class="btn btn-secondary">Close</label>
      </div>
    </div>
  </label>
</label>

<ng-template #loading>
  <app-loading></app-loading>
</ng-template>

<div *ngIf="currentDpms$ | async as dpms; else loading">
  <h2 class="text-3xl mb-5 font-bold">Current DPMs</h2>
  <div class="lg:overflow-x-auto">
    <div class="grid place-items-center">
      <table class="table table-fixed lg:table-auto w-full">
        <thead>
          <tr>
            <th class="lg:text-base break-words">Type</th>
            <th class="lg:text-base break-words">Points</th>
            <th class="lg:text-base break-words whitespace-normal">
              Date Received
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            class="hover hover:cursor-pointer"
            *ngFor="let dpm of dpms"
            (click)="clickRow(dpm)"
          >
            <td class="lg:text-base break-words whitespace-normal">
              {{ dpm.type }}
            </td>
            <td class="lg:text-base break-words whitespace-normal">
              {{ dpm.points | points }}
            </td>
            <td class="lg:text-base break-words whitespace-normal">
              {{ dpm.date }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
